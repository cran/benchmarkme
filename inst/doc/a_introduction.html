<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Colin Gillespie" />


<title>Crowd sourced benchmarks</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Crowd sourced benchmarks</h1>
<h4 class="author">Colin Gillespie</h4>



<div id="system-benchmarking" class="section level1">
<h1>System benchmarking</h1>
<p>R benchmarking made easy. The package contains a number of
benchmarks, heavily based on the benchmarks at <a href="https://mac.R-project.org/benchmarks/R-benchmark-25.R" class="uri">https://mac.R-project.org/benchmarks/R-benchmark-25.R</a>,
for assessing the speed of your system.</p>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>A straightforward way of speeding up your analysis is to buy a better
computer. Modern desktops are relatively cheap, especially compared to
user time. However, it isnâ€™t clear if upgrading your computing is worth
the cost. The <strong>benchmarkme</strong> package provides a set of
benchmarks to help quantify your system. More importantly, it allows you
to compare your timings with <em>other</em> systems.</p>
<!-- You can view past benchmarks via the [Shiny](https://jumpingrivers.shinyapps.io/benchmarkme/) interface. -->
</div>
<div id="overview-1" class="section level2">
<h2>Overview</h2>
<p>The package is on <a href="https://cran.r-project.org/package=benchmarkme">CRAN</a> and can
be installed in the usual way</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;benchmarkme&quot;</span>)</span></code></pre></div>
<p>There are two groups of benchmarks:</p>
<ul>
<li><code>benchmark_std()</code>: this benchmarks numerical operations
such as loops and matrix operations. The benchmark comprises of three
separate benchmarks: <code>prog</code>, <code>matrix_fun</code>, and
<code>matrix_cal</code>.</li>
<li><code>benchmark_io()</code>: this benchmarks reading and writing a 5
/ 50, MB csv file.</li>
</ul>
<div id="the-benchmark_std-function" class="section level3">
<h3>The benchmark_std() function</h3>
<p>This benchmarks numerical operations such as loops and matrix
operations. This benchmark comprises of three separate benchmarks:
<code>prog</code>, <code>matrix_fun</code>, and <code>matrix_cal</code>.
If you have less than 3GB of RAM (run <code>get_ram()</code> to find out
how much is available on your system), then you should kill any memory
hungry applications, e.g. firefox, and set <code>runs = 1</code> as an
argument.</p>
<p>To benchmark your system, use</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;benchmarkme&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Increase runs if you have a higher spec machine</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">benchmark_std</span>(<span class="at">runs =</span> <span class="dv">3</span>)</span></code></pre></div>
<p>and upload your results</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## You can control exactly what is uploaded. See details below.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">upload_results</span>(res)</span></code></pre></div>
<p>You can compare your results to other users via</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(res)</span></code></pre></div>
<!-- You can also compare your results using the [Shiny](https://jumpingrivers.shinyapps.io/benchmarkme/) interface.  -->
<!-- Simply create a results bundle -->
<!-- ```{r, eval=FALSE} -->
<!-- create_bundle(res, filename = "results.rds") -->
<!-- ``` -->
<!-- and upload to the webpage. -->
</div>
<div id="the-benchmark_io-function" class="section level3">
<h3>The benchmark_io() function</h3>
<p>This function benchmarks reading and writing a 5MB or 50MB (if you
have less than 4GB of RAM, reduce the number of <code>runs</code> to 1).
Run the benchmark using</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>res_io <span class="ot">=</span> <span class="fu">benchmark_io</span>(<span class="at">runs =</span> <span class="dv">3</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">upload_results</span>(res_io)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(res_io)</span></code></pre></div>
<p>By default the files are written to a temporary directory
generated</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tempdir</span>()</span></code></pre></div>
<p>which depends on the value of</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.getenv</span>(<span class="st">&quot;TMPDIR&quot;</span>)</span></code></pre></div>
<p>You can alter this to via the <code>tmpdir</code> argument. This is
useful for comparing hard drive access to a network drive.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>res_io <span class="ot">=</span> <span class="fu">benchmark_io</span>(<span class="at">tmpdir =</span> <span class="st">&quot;some_other_directory&quot;</span>)</span></code></pre></div>
</div>
<div id="parallel-benchmarks" class="section level3">
<h3>Parallel benchmarks</h3>
<p>The benchmark functions above have a parallel option - just simply
specify the number of cores you want to test. For example to test using
four cores</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>res_io <span class="ot">=</span> <span class="fu">benchmark_std</span>(<span class="at">runs =</span> <span class="dv">3</span>, <span class="at">cores =</span> <span class="dv">4</span>)</span></code></pre></div>
<p>The process for the parallel benchmarks of the pseudo function
<code>benchmark_x(cores = n)</code> is: - initialise the parallel
environment - Start timer - Run job x in core 1, 2, â€¦, n simultaneously
- when <strong>all</strong> jobs finish stop timer - stop parallel
environment This procedure is repeat <code>runs</code> times.</p>
</div>
</div>
<div id="previous-versions-of-this" class="section level2">
<h2>Previous versions of this</h2>
<p>This package was started around 2015. However, multiple changes in
the byte compiler over the last few years, has made it very difficult to
use previous results. So we have to start from scratch.</p>
<p>The previous data can be obtained via</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(past_results, <span class="at">package =</span> <span class="st">&quot;benchmarkmeData&quot;</span>)</span></code></pre></div>
</div>
<div id="machine-specs" class="section level2">
<h2>Machine specs</h2>
<p>The package has a few useful functions for extracting system
specs:</p>
<ul>
<li>RAM: <code>get_ram()</code></li>
<li>CPUs: <code>get_cpu()</code></li>
<li>BLAS library: <code>get_linear_algebra()</code></li>
<li>Is byte compiling enabled: <code>get_byte_compiler()</code></li>
<li>General platform info: <code>get_platform_info()</code></li>
<li>R version: <code>get_r_version()</code></li>
</ul>
<p>The above functions have been tested on a number of systems. If they
donâ€™t work on your system, please raise <a href="https://github.com/csgillespie/benchmarkme/issues">GitHub</a>
issue.</p>
</div>
<div id="uploaded-data-sets" class="section level2">
<h2>Uploaded data sets</h2>
<p>A summary of the uploaded data sets is available in the <a href="https://github.com/csgillespie/benchmarkme-data">benchmarkmeData</a>
package</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(past_results_v2, <span class="at">package =</span> <span class="st">&quot;benchmarkmeData&quot;</span>)</span></code></pre></div>
<p>A column of this data set, contains the unique identifier returned by
the <code>upload_results()</code> function.</p>
</div>
<div id="whats-uploaded" class="section level2">
<h2>Whatâ€™s uploaded</h2>
<p>Two objects are uploaded:</p>
<ol style="list-style-type: decimal">
<li>Your benchmarks from <code>benchmark_std()</code> or
<code>benchmark_io()</code>;</li>
<li>A summary of your system information
(<code>get_sys_details()</code>).</li>
</ol>
<p>The <code>get_sys_details()</code> returns:</p>
<ul>
<li><code>Sys.info()</code>;</li>
<li><code>get_platform_info()</code>;</li>
<li><code>get_r_version()</code>;</li>
<li><code>get_ram()</code>;</li>
<li><code>get_cpu()</code>;</li>
<li><code>get_byte_compiler()</code>;</li>
<li><code>get_linear_algebra()</code>;</li>
<li><code>installed.packages()</code>;</li>
<li><code>Sys.getlocale()</code>;</li>
<li>The <code>benchmarkme</code> version number;</li>
<li>Unique ID - used to extract results;</li>
<li>The current date.</li>
</ul>
<p>The function <code>Sys.info()</code> does include the user and
nodenames. In the public release of the data, this information will be
removed. If you donâ€™t wish to upload certain information, just set the
corresponding argument, i.e.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">upload_results</span>(res, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">sys_info =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<hr />
<p>Development of this package was supported by <a href="https://www.jumpingrivers.com">Jumping Rivers</a></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
